ktor {
    deployment {
        port = 8080
        port = ${?PORT}
    }
    application {
        modules = [ com.task.ApplicationKt.module ]
    }
}

database {
    driverClassName = "org.postgresql.Driver"
    
    # ローカル開発用デフォルト値
    host = "localhost"
    host = ${?PGHOST}
    port = 5432
    port = ${?PGPORT}
    name = "housework"
    name = ${?PGDATABASE}
    
    # JDBC URL を個別の変数から構築
    # Railway では PGHOST, PGPORT, PGDATABASE が自動的に提供される
    jdbcUrl = "jdbc:postgresql://"${database.host}":"${database.port}"/"${database.name}
    
    # JDBC_DATABASE_URL が設定されている場合はそちらを優先（手動設定用）
    jdbcUrl = ${?JDBC_DATABASE_URL}
    
    username = "housework"
    username = ${?PGUSER}
    password = "housework_password"
    password = ${?PGPASSWORD}
    maximumPoolSize = 10
}

jwt {
    secret = "your-256-bit-secret-key-for-development"
    secret = ${?JWT_SECRET}
    issuer = "housework-app"
    audience = "housework-users"
    realm = "Housework API"
    expiresInMs = 604800000  # 7日間 (7 * 24 * 60 * 60 * 1000)
}
